/* Apple-inspired page transitions for Orchestra */

/* Base transition classes */
.page-transition-wrapper {
  position: relative;
  width: 100%;
  min-height: 100vh;
}

/* Fade through black - iOS app transition style */
.page-exit-fade {
  animation: exitFadeToBlack 0.6s cubic-bezier(0.32, 0, 0.67, 0) forwards;
}

.page-enter-fade {
  animation: enterFromBlack 0.6s cubic-bezier(0.33, 1, 0.68, 1) forwards;
}

@keyframes exitFadeToBlack {
  0% {
    opacity: 1;
    transform: scale(1);
    filter: brightness(1);
  }
  50% {
    opacity: 0.3;
    transform: scale(0.98);
    filter: brightness(0.7);
  }
  100% {
    opacity: 0;
    transform: scale(0.96);
    filter: brightness(0);
  }
}

@keyframes enterFromBlack {
  0% {
    opacity: 0;
    transform: scale(1.02);
    filter: brightness(0);
  }
  50% {
    opacity: 0.5;
    transform: scale(1.01);
    filter: brightness(0.8);
  }
  100% {
    opacity: 1;
    transform: scale(1);
    filter: brightness(1);
  }
}

/* Dissolve transition - macOS window style */
.page-exit-dissolve {
  animation: exitDissolve 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.page-enter-dissolve {
  animation: enterDissolve 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes exitDissolve {
  0% {
    opacity: 1;
    transform: scale(1) translateZ(0);
  }
  100% {
    opacity: 0;
    transform: scale(0.95) translateZ(0);
  }
}

@keyframes enterDissolve {
  0% {
    opacity: 0;
    transform: scale(1.05) translateZ(0);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateZ(0);
  }
}

/* Iris transition - Classic Mac style, modernized */
.page-exit-iris {
  animation: exitIris 0.7s cubic-bezier(0.65, 0, 0.35, 1) forwards;
  transform-origin: center center;
}

.page-enter-iris {
  animation: enterIris 0.7s cubic-bezier(0.65, 0, 0.35, 1) forwards;
  transform-origin: center center;
}

@keyframes exitIris {
  0% {
    opacity: 1;
    clip-path: circle(100% at center);
    transform: scale(1);
  }
  100% {
    opacity: 0;
    clip-path: circle(0% at center);
    transform: scale(0.9);
  }
}

@keyframes enterIris {
  0% {
    opacity: 0;
    clip-path: circle(0% at center);
    transform: scale(1.1);
  }
  100% {
    opacity: 1;
    clip-path: circle(100% at center);
    transform: scale(1);
  }
}

/* Subtle push - iOS navigation style */
.page-exit-push {
  animation: exitPush 0.4s cubic-bezier(0.32, 0, 0.67, 0) forwards;
}

.page-enter-push {
  animation: enterPush 0.4s cubic-bezier(0.33, 1, 0.68, 1) forwards;
}

@keyframes exitPush {
  0% {
    opacity: 1;
    transform: translateX(0) scale(1);
  }
  100% {
    opacity: 0.3;
    transform: translateX(-20%) scale(0.95);
  }
}

@keyframes enterPush {
  0% {
    opacity: 0;
    transform: translateX(100%) scale(1);
  }
  100% {
    opacity: 1;
    transform: translateX(0) scale(1);
  }
}

/* Recommended: Subtle zoom fade - Modern Apple style */
.page-exit-zoom-fade {
  animation: exitZoomFade 0.5s cubic-bezier(0.32, 0, 0.67, 0) forwards;
  transform-origin: center center;
  will-change: transform, opacity, filter;
}

.page-enter-zoom-fade {
  animation: enterZoomFade 0.5s cubic-bezier(0.33, 1, 0.68, 1) forwards;
  transform-origin: center center;
  will-change: transform, opacity, filter;
}

@keyframes exitZoomFade {
  0% {
    opacity: 1;
    transform: scale(1) translateZ(0);
    filter: blur(0px);
  }
  60% {
    opacity: 0.5;
    transform: scale(0.97) translateZ(0);
    filter: blur(2px);
  }
  100% {
    opacity: 0;
    transform: scale(0.95) translateZ(0);
    filter: blur(8px);
  }
}

@keyframes enterZoomFade {
  0% {
    opacity: 0;
    transform: scale(1.03) translateZ(0);
    filter: blur(8px);
  }
  40% {
    opacity: 0.7;
    transform: scale(1.01) translateZ(0);
    filter: blur(2px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateZ(0);
    filter: blur(0px);
  }
}

/* Content-aware transitions for specific elements */
.transition-delay-1 { animation-delay: 0.1s; }
.transition-delay-2 { animation-delay: 0.2s; }
.transition-delay-3 { animation-delay: 0.3s; }

/* Preserve background during transitions */
.transition-background-persist {
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
}

/* Smooth scroll behavior for navigation */
html {
  scroll-behavior: smooth;
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  .page-exit-fade,
  .page-enter-fade,
  .page-exit-dissolve,
  .page-enter-dissolve,
  .page-exit-iris,
  .page-enter-iris,
  .page-exit-push,
  .page-enter-push,
  .page-exit-zoom-fade,
  .page-enter-zoom-fade {
    animation-duration: 0.2s !important;
  }
  
  @keyframes exitZoomFade {
    0% { opacity: 1; }
    100% { opacity: 0; }
  }
  
  @keyframes enterZoomFade {
    0% { opacity: 0; }
    100% { opacity: 1; }
  }
}

/* Hardware acceleration hints */
.page-transition-wrapper > * {
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}